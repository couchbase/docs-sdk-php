= SDK Release Notes
:description: Release notes for the Couchbase PHP Client.
:navtitle: Release Notes
:page-topic-type: reference
:page-toclevels: 2
:page-aliases: ROOT:relnotes-php-sdk,ROOT:release-notes,ROOT:sdk-release-notes

// tag::all[]
[abstract]
{description}

These pages cover the 4.x versions of the Couchbase PHP SDK.

For download instructions, see the xref:sdk-full-installation.adoc[installation page].



[#latest-release]
== PHP SDK 4.2 Releases

We always recommend using the latest version of the SDK -- it contains all of the latest security patches and support for new and upcoming features.
All patch releases for each dot minor release should be API compatible, and safe to upgrade;
any changes to expected behavior are noted in the release notes that follow.

PHP SDK 4.1 is written to xref:compatibility.adoc#api-version[version 3.4 of the SDK API specification]
(and matching the features available in Couchbase 7.1 and earlier).


=== Version 4.2.0 (17 March 2024)

https://docs.couchbase.com/sdk-api/couchbase-php-client-4.2.0[API documentation]
| link:++https://github.com/couchbase/couchbase-php-client/compare/4.1.6...4.2.0++[Full Changelog]

|===
|Checksum |               |         |     |https://packages.couchbase.com/clients/php/couchbase-4.2.0.sha256sum[couchbase-4.2.0.sha256sum]
|Source   |               |         |     |https://packages.couchbase.com/clients/php/couchbase-4.2.0.tgz[couchbase-4.2.0.tgz]
|Linux    | x86_64        | PHP 8.1 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-nts-linux-x86_64.tgz[couchbase-4.2.0-php8.1-nts-linux-x86_64.tgz]
|Linux    | x86_64        | PHP 8.1 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-zts-linux-x86_64.tgz[couchbase-4.2.0-php8.1-zts-linux-x86_64.tgz]
|Linux    | x86_64        | PHP 8.2 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-nts-linux-x86_64.tgz[couchbase-4.2.0-php8.2-nts-linux-x86_64.tgz]
|Linux    | x86_64        | PHP 8.2 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-zts-linux-x86_64.tgz[couchbase-4.2.0-php8.2-zts-linux-x86_64.tgz]
|Linux    | x86_64        | PHP 8.3 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-nts-linux-x86_64.tgz[couchbase-4.2.0-php8.3-nts-linux-x86_64.tgz]
|Linux    | x86_64        | PHP 8.3 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-zts-linux-x86_64.tgz[couchbase-4.2.0-php8.3-zts-linux-x86_64.tgz]
|Linux    | x86_64 (musl) | PHP 8.1 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-nts-linux-musl-x86_64.tgz[couchbase-4.2.0-php8.1-nts-linux-musl-x86_64.tgz]
|Linux    | x86_64 (musl) | PHP 8.2 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-nts-linux-musl-x86_64.tgz[couchbase-4.2.0-php8.2-nts-linux-musl-x86_64.tgz]
|Linux    | x86_64 (musl) | PHP 8.3 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-nts-linux-musl-x86_64.tgz[couchbase-4.2.0-php8.3-nts-linux-musl-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.1 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-nts-macos-x86_64.tgz[couchbase-4.2.0-php8.1-nts-macos-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.1 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-zts-macos-x86_64.tgz[couchbase-4.2.0-php8.1-zts-macos-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.2 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-nts-macos-x86_64.tgz[couchbase-4.2.0-php8.2-nts-macos-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.2 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-zts-macos-x86_64.tgz[couchbase-4.2.0-php8.2-zts-macos-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.3 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-nts-macos-x86_64.tgz[couchbase-4.2.0-php8.3-nts-macos-x86_64.tgz]
|MacOS    | x86_64        | PHP 8.3 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-zts-macos-x86_64.tgz[couchbase-4.2.0-php8.3-zts-macos-x86_64.tgz]
|MacOS    | arm64         | PHP 8.1 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-nts-macos-arm64.tgz[couchbase-4.2.0-php8.1-nts-macos-arm64.tgz]
|MacOS    | arm64         | PHP 8.1 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.1-zts-macos-arm64.tgz[couchbase-4.2.0-php8.1-zts-macos-arm64.tgz]
|MacOS    | arm64         | PHP 8.2 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-nts-macos-arm64.tgz[couchbase-4.2.0-php8.2-nts-macos-arm64.tgz]
|MacOS    | arm64         | PHP 8.2 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.2-zts-macos-arm64.tgz[couchbase-4.2.0-php8.2-zts-macos-arm64.tgz]
|MacOS    | arm64         | PHP 8.3 | NTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-nts-macos-arm64.tgz[couchbase-4.2.0-php8.3-nts-macos-arm64.tgz]
|MacOS    | arm64         | PHP 8.3 | ZTS |https://packages.couchbase.com/clients/php/couchbase-4.2.0-php8.3-zts-macos-arm64.tgz[couchbase-4.2.0-php8.3-zts-macos-arm64.tgz]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-979[PCBC-979]: Add static helpers to SearchQuery types (https://github.com/couchbase/couchbase-php-client/pull/149[#149])
* https://issues.couchbase.com/browse/PCBC-970[PCBC-970]: SDK Support for Scoped Search Indexes (https://github.com/couchbase/couchbase-php-client/pull/147[#147])
* https://issues.couchbase.com/browse/PCBC-968[PCBC-968]: Support for maxTTL value of -1 for collection "no expiry" (https://github.com/couchbase/couchbase-php-client/pull/144[#144])
* https://issues.couchbase.com/browse/PCBC-967[PCBC-967]: Support for vector search (https://github.com/couchbase/couchbase-php-client/pull/143[#143])
* https://issues.couchbase.com/browse/PCBC-965[PCBC-965]: Support DocNotLockedException and core update (https://github.com/couchbase/couchbase-php-client/pull/142[#142])
* https://issues.couchbase.com/browse/PCBC-960[PCBC-960]: Merge protostellar branch to master (https://github.com/couchbase/couchbase-php-client/pull/138[#138], https://github.com/couchbase/couchbase-php-client/pull/153[#153])

==== Fixes

* https://issues.couchbase.com/browse/PCBC-964[PCBC-964]: Wait until the core connection is closed (https://github.com/couchbase/couchbase-php-client/pull/141[#141])
* https://issues.couchbase.com/browse/PCBC-972[PCBC-972]: Fix C++ detection on MacOS X (https://github.com/couchbase/couchbase-php-client/pull/145[#145])
* Add missing use statement in class `DecrementOptions` (https://github.com/couchbase/couchbase-php-client/pull/146[#146])
* Update core and rename query_index_create fields to keys (https://github.com/couchbase/couchbase-php-client/pull/148[#148])

==== Notable changes in core C++

===== Since 1.0.0-dp.14

Fixes

* https://issues.couchbase.com/browse/CXXCBC-482[CXXCBC-482]: Range scan orchestrator should use best effort retry strategy by default. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/542[#542])
* https://issues.couchbase.com/browse/CXXCBC-481[CXXCBC-481]: Fix potential crash when parsing search result hits. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/541[#541])
* https://issues.couchbase.com/browse/CXXCBC-461[CXXCBC-461]: Do not send ping to nodes that have not completed bootstrap. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/540[#540])
* https://issues.couchbase.com/browse/CXXCBC-480[CXXCBC-480]: LookupInAnyReplica should not enforce any limits on number of specs in the library. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/539[#539])
* https://issues.couchbase.com/browse/CXXCBC-479[CXXCBC-479]: Fix capabilities check for replica LookupIn operations. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/537[#537])
* https://issues.couchbase.com/browse/CXXCBC-336[CXXCBC-336]: Do not fallback to 8.8.8.8, if we cannot obtain system DNS server (https://github.com/couchbaselabs/couchbase-cxx-client/pull/533[#533])

===== Since 1.0.0-dp.13

New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-456[CXXCBC-456]: handle 0x0d (config_only) status from KV (https://github.com/couchbaselabs/couchbase-cxx-client/pull/523[#523]).
* https://issues.couchbase.com/browse/CXXCBC-191[CXXCBC-191]: Create Index Key Encoding (https://github.com/couchbaselabs/couchbase-cxx-client/pull/519[#519])
* https://issues.couchbase.com/browse/CXXCBC-442[CXXCBC-442]: Add support for raw_json and raw_string transcoders (https://github.com/couchbaselabs/couchbase-cxx-client/pull/514[#514], https://github.com/couchbaselabs/couchbase-cxx-client/pull/515[#515])
* Add full_set option to view query options (https://github.com/couchbaselabs/couchbase-cxx-client/pull/517[#517])

Fixes

* https://issues.couchbase.com/browse/CXXCBC-345[CXXCBC-345]: Range scan improvements & resolve concurrency issues (https://github.com/couchbaselabs/couchbase-cxx-client/pull/525[#525]).
* https://issues.couchbase.com/browse/CXXCBC-284[CXXCBC-284]: Do not use session that is not bootstrapped to poll for config (https://github.com/couchbaselabs/couchbase-cxx-client/pull/528[#528])
* https://issues.couchbase.com/browse/CXXCBC-447[CXXCBC-447]: Use addresses from the config to bootstrap bucket (https://github.com/couchbaselabs/couchbase-cxx-client/pull/516[#516])
* https://issues.couchbase.com/browse/CXXCBC-450[CXXCBC-450]: Reset bootstrap handler before re-bootstrap (https://github.com/couchbaselabs/couchbase-cxx-client/pull/524[#524]).
* Update view design_document rev to be optional (https://github.com/couchbaselabs/couchbase-cxx-client/pull/526[#526]).
* Change encoded search request showrequest param from string to boolean. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/518[#518])
* https://issues.couchbase.com/browse/CXXCBC-452[CXXCBC-452]: Update capabilities and fail fast when selected feature is not available. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/522[#522], https://github.com/couchbaselabs/couchbase-cxx-client/pull/513[#513])
    * https://issues.couchbase.com/browse/CXXCBC-431[CXXCBC-431]: Add check for history retention bucket capability in collection create/update (https://github.com/couchbaselabs/couchbase-cxx-client/pull/502[#502], https://github.com/couchbaselabs/couchbase-cxx-client/pull/505[#505])
    * https://issues.couchbase.com/browse/CXXCBC-421[CXXCBC-421]: Return feature_not_available when query preserve expiry is not supported (https://github.com/couchbaselabs/couchbase-cxx-client/pull/510[#510])

===== Since 1.0.0-dp.12

New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-346[CXXCBC-346]: Support for maxTTL value of -1 for collection 'no expiry'. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/500[#500])
* https://issues.couchbase.com/browse/CXXCBC-442[CXXCBC-442]: Support for raw_json and raw_string transcoders. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/514[#514])
* https://issues.couchbase.com/browse/CXXCBC-440[CXXCBC-440]: Support for Scoped Search Indexes. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/512[#512], https://github.com/couchbaselabs/couchbase-cxx-client/pull/513[#513])

Fixes

* https://issues.couchbase.com/browse/CXXCBC-284[CXXCBC-284]: Reduce network traffic when polling for cluster configuration. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/504[#504])
* https://issues.couchbase.com/browse/CXXCBC-422[CXXCBC-422]: Add insufficient credentials error code to common query error code conversion. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/511[#511])
* https://issues.couchbase.com/browse/CXXCBC-421[CXXCBC-421]: Return `feature_not_available` when query preserve expiry is not supported. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/510[#510])
* https://issues.couchbase.com/browse/CXXCBC-426[CXXCBC-426]: Get with very large projection test is returning fields outside of the projection. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/499[#499])

===== Since 1.0.0-dp.11

Fixes

* https://issues.couchbase.com/browse/CXXCBC-404[CXXCBC-404]: KV_LOCKED status should be exposed as `cas_mismatch` for unlock. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/479[#479])
* https://issues.couchbase.com/browse/CXXCBC-403[CXXCBC-403]: Allow retries for KV `not_my_vbucket` response. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/480[#480])
* https://issues.couchbase.com/browse/CXXCBC-368[CXXCBC-368]: Subscribe to clustermap notifications to speedup failover. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/490[#490])'
* https://issues.couchbase.com/browse/CXXCBC-419[CXXCBC-419]: Ensure that MCBP protocol parser starts with clean state. Fixes protocol parsing issues when bootstrap sequence is being retried. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/496[#496])
* https://issues.couchbase.com/browse/CXXCBC-409[CXXCBC-409]: Add handling for 'index does not exist' query error. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/492[#492])
* https://issues.couchbase.com/browse/CXXCBC-391[CXXCBC-391]: Fix transactions API inconsistencies. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/482[#482])
  * Remove `kv_timeout`
  * Rename `expiration_time` to `timeout`

New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-100[CXXCBC-100]: Add ability to set timeout for ping. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/486[#486])
* https://issues.couchbase.com/browse/CXXCBC-412[CXXCBC-412]: Support `document_not_locked` response. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/491[#491])

===== Since 1.0.0-dp.10

Fixes

* https://issues.couchbase.com/browse/CXXCBC-383[CXXCBC-383]: Map `subdoc_doc_too_deep` KV status to `path_too_deep` error code. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/455[#455])

New features and enhancements

* https://issues.couchbase.com/browse/CXXCBC-377[CXXCBC-377]: Implement ExtParallelUnstaging in transactions. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/457[#457])
* https://issues.couchbase.com/browse/CXXCBC-363[CXXCBC-363]: Add examples for bulk operations. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/442[#442])
* Add more information to diagnose timeouts on NMV responses. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/475[#475])

== PHP SDK 4.1 Releases

=== Version 4.1.6 (10 October 2023)

https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.6[API documentation]
| link:++https://github.com/couchbase/couchbase-php-client/compare/4.1.5...4.1.6++[Full Changelog]

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.6.tgz[couchbase-4.1.6.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.6.sha256sum[couchbase-4.1.6.sha256sum]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-956[PCBC-956]:
Updated wrapper-side bucket settings -- to now use new `BucketSettings` optional fields in underlying {cpp} core
(https://github.com/couchbase/couchbase-php-client/pull/132[#132]).
* https://issues.couchbase.com/browse/PCBC-950[PCBC-950]:
Added support to bucket settings for no dedup feature
(https://github.com/couchbase/couchbase-php-client/pull/131[#131]).
* https://issues.couchbase.com/browse/PCBC-955[PCBC-955]:
Preventing trailing garbage in encoded CAS value
(https://github.com/couchbase/couchbase-php-client/pull/134[#134]).
* Updates to support PHP 8.3: `zend_bool` was removed from 8.3.

==== Underlying C++ SDK Core Changes

* https://issues.couchbase.com/browse/CXXCBC-376[CXXCBC-376]:
Changed what 'create' and 'update' bucket operations send to the server.
Unrequired `BucketSettings` fields are now set to optional, and are not sent unless the settings are explicitly specified.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/451[#451]).
* https://issues.couchbase.com/browse/CXXCBC-374[CXXCBC-374]:
The SDK should now return a 'bucket_exists' error when the bucket already exists during a 'create' operation.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/449[#449]).
* https://issues.couchbase.com/browse/CXXCBC-359[CXXCBC-359]:
Reduced the default timeout for idle HTTP connections to 1 second.
The previous default (4.5 seconds) was too close to the 5-second server-side timeout, and could lead to spurious request failures.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/448[#448]).
* https://issues.couchbase.com/browse/CXXCBC-367[CXXCBC-367],
https://issues.couchbase.com/browse/CXXCBC-370[CXXCBC-370]:
Added history retention settings to buckets/collection management
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/446[#446]).
* https://issues.couchbase.com/browse/CXXCBC-119[CXXCBC-119]:
Return booleans for subdocument 'exists' operation, instead of error code
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/444[#444],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/452[#452]).
* Detect `collection_not_found` error in `update_collection` response
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/450[#450]).


=== Version 4.1.5 (21 August 2023)

https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.5[API documentation]
| link:++https://github.com/couchbase/couchbase-php-client/compare/4.1.4...4.1.5++[Full Changelog]

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.5.tgz[couchbase-4.1.5.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.5.sha256sum[couchbase-4.1.5.sha256sum]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-939[PCBC-939]:
Added support for query with Read from Replica (https://github.com/couchbaselabs/couchbase-cxx-client/pull/118[#118]).

* https://issues.couchbase.com/browse/PCBC-831[PCBC-831]:
Implemented search index management (https://github.com/couchbaselabs/couchbase-cxx-client/pull/115[#115]).

* https://issues.couchbase.com/browse/PCBC-945[PCBC-945]:
Expiry options for increment/decrement are now exposed, as they were before 4.0.0 (https://github.com/couchbaselabs/couchbase-cxx-client/pull/120[#120]).

* https://issues.couchbase.com/browse/PCBC-937[PCBC-937]:
Fixed `removeMulti`, which now correctly removes documents (https://github.com/couchbaselabs/couchbase-cxx-client/pull/123[#123]).

* https://issues.couchbase.com/browse/PCBC-938[PCBC-938]:
Override exception constructor in PHP Extension, which allows to initialize context in derived classes (https://github.com/couchbaselabs/couchbase-cxx-client/pull/117[#117]).

* https://issues.couchbase.com/browse/PCBC-940[PCBC-940]:
Added support for subdoc Read from Replica (https://github.com/couchbaselabs/couchbase-cxx-client/pull/121[#121]).

* https://issues.couchbase.com/browse/PCBC-884[PCBC-884]:
Added support for Native KV range scans (https://github.com/couchbaselabs/couchbase-cxx-client/pull/122[#122], https://github.com/couchbaselabs/couchbase-cxx-client/pull/127[#127]).

==== Underlying C++ SDK Core

* https://issues.couchbase.com/browse/CXXCBC-333[CXXCBC-333]:
Fixed parsing 'resolv.conf' on Linux (https://github.com/couchbaselabs/couchbase-cxx-client/pull/416[#416]).
** The library might not ignore trailing characters when reading nameserver address from the file.

* https://issues.couchbase.com/browse/CXXCBC-335[CXXCBC-335]:
now logging connection options for visibility (https://github.com/couchbaselabs/couchbase-cxx-client/pull/417[#417]).

* https://issues.couchbase.com/browse/CXXCBC-343[CXXCBC-343]: Continue bootsrap if DNS-SRV resolution fails (https://github.com/couchbaselabs/couchbase-cxx-client/pull/422[#422]).

* https://issues.couchbase.com/browse/CXXCBC-242[CXXCBC-242]:
SDK Support for Native KV Range Scans (https://github.com/couchbaselabs/couchbase-cxx-client/pull/419[#419], https://github.com/couchbaselabs/couchbase-cxx-client/pull/423[#423],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/424[#424],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/426[#426],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/428[#428],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/431[#431],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/432[#432],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/433[#433],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/434[#434]).

* https://issues.couchbase.com/browse/CXXCBC-339[CXXCBC-339]: Disable older TLS protocols (https://github.com/couchbaselabs/couchbase-cxx-client/pull/418[#418]).


=== Version 4.1.4 (26 May 2023)

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.4

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.4.tgz[couchbase-4.1.4.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.4.sha256sum[couchbase-4.1.4.sha256sum]
|===

==== Enhancements

* Added `couchbase::` namespace to `durability_level`, which fixes using Sync Durability.
(https://github.com/couchbase/couchbase-php-client/pull/102[#102])

* https://issues.couchbase.com/browse/PCBC-934[PCBC-934]:
Fixed setting timeout for transactions.

==== Underlying C++ SDK Core


* https://issues.couchbase.com/browse/CXXCBC-327[CXXCBC-327]:
Bundled Mozilla certificates with the library
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/405[#405],
https://github.com/couchbaselabs/couchbase-cxx-client/pull/408[#408]).
Source: https://curl.se/docs/caextract.html.
Use the `disable_mozilla_ca_certificates` connection string option to disable the bundled certificates.

* https://issues.couchbase.com/browse/CXXCBC-324[CXXCBC-324]:
Port and network name now checked on session restart, improving performance during rebalance
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/401[#401]).

* https://issues.couchbase.com/browse/CXXCBC-323[CXXCBC-323]:
`bootstrap_timeout` and `resolve_timeout` can now be used in the connection string
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/400[#400]).

* Introduced `dump_configuration` option for debugging.
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/398[#398])
It logs cluster configuration at trace level.


=== Version 4.1.3 (13 April 2023)

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.3

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.3.tgz[couchbase-4.1.3.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.3.sha256sum[couchbase-4.1.3.sha256sum]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-915[PCBC-915]:
Fixed incorrect handling of timestamps as expiry in mutation options
(https://github.com/couchbase/couchbase-php-client/pull/88[#88]).

* https://issues.couchbase.com/browse/PCBC-828[PCBC-828]:
Implemented collection management
(https://github.com/couchbase/couchbase-php-client/pull/89[#89]).

* https://issues.couchbase.com/browse/PCBC-918[PCBC-918]:
Extra attributes in `ExistsResult` (`deleted`, `expiry`, `flags`, and `sequenceNumber`) are now optional
(https://github.com/couchbase/couchbase-php-client/pull/95[#95]).


==== Underlying C++ SDK Core


* https://issues.couchbase.com/browse/CXXCBC-31[CXXCBC-31]:
Allow the use of schemaless connection strings (e.g. `"cb1.example.com,cb2.example.com"`)
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/395[#394]).

* https://issues.couchbase.com/browse/CXXCBC-318[CXXCBC-318]:
Always try TCP if UDP fails in DNS-SRV resolver (https://github.com/couchbaselabs/couchbase-cxx-client/pull/390[#390]).

* https://issues.couchbase.com/browse/CXXCBC-320[CXXCBC-320]:
Negative expiry in atr was leaving docs in a stuck state -- this has been fixed, with expiry atr now becoming an `int32_t`
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/393[#393]).

* https://issues.couchbase.com/browse/CXXCBC-310[CXXCBC-310]:
Improved shutdown of the `LostTxnCleanup` thread
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/389[#389]).


=== Version 4.1.2 (20 March 2023)

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.2

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.2.tgz[couchbase-4.1.2.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.2.sha256sum[couchbase-4.1.2.sha256sum]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-888[PCBC-888]:
Added new method `Collection#queryIndexes` that allows to manage query indexes defined for the collection
(https://github.com/couchbase/couchbase-php-client/pull/68[#68]).
* Added optional context to `CouchbaseException` constructor (https://github.com/couchbase/couchbase-php-client/pull/85[#85]).

==== Underlying C++ SDK Core

* https://issues.couchbase.com/browse/CXXCBC-144[CXXCBC-144]:
Search query on collections no longer requires you to pass in the scope name -- it is inferred from the index
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/379[#379]).
* https://issues.couchbase.com/browse/CXXCBC-145[CXXCBC-145]:
Search query request, raw option added
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/380[#380]).
* https://issues.couchbase.com/browse/CXXCBC-194[CXXCBC-194]:
The SDK now supports the `ExtThreadSafe` transaction extension
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/374[#374], https://github.com/couchbaselabs/couchbase-cxx-client/pull/376[#376]).
* https://issues.couchbase.com/browse/CXXCBC-316[CXXCBC-316]:
When  a document is removed in a transaction, and then a call made to `get_optional`, we expect to just get an empty optional.
However, the handling was raising a `transaction_operation_failed`
This has been fixed, and an `empty optional` will now be returned
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/385[#385]).
* https://issues.couchbase.com/browse/CXXCBC-310[CXXCBC-310]:
Fixed race condition in transaction_context state machine
(https://github.com/couchbaselabs/couchbase-cxx-client/pull/386[#386], https://github.com/couchbaselabs/couchbase-cxx-client/pull/378[#378]).


=== Version 4.1.1 (22 February 2023)

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.1

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.1.tgz[couchbase-4.1.1.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.1.sha256sum[couchbase-4.1.1.sha256sum]
|===

==== Enhancements

* https://issues.couchbase.com/browse/PCBC-869[PCBC-869]:
  Implemented `changePassword` for management API (https://github.com/couchbase/couchbase-php-client/pull/55[#55],  https://github.com/couchbase/couchbase-php-client/pull/56[#56])
* https://issues.couchbase.com/browse/PCBC-891[PCBC-891]:
  Append extension version info to HELLO indentifier (https://github.com/couchbase/couchbase-php-client/pull/58[#58])
* https://issues.couchbase.com/browse/PCBC-901[PCBC-901]:
  Attach error details to management exceptions (https://github.com/couchbase/couchbase-php-client/pull/71[#71])
* Increase required PHP version up to 8.0 (https://github.com/couchbase/couchbase-php-client/pull/76[#76])

==== Fixes

* https://issues.couchbase.com/browse/PCBC-890[PCBC-890]:
  Scope must implement ScopeInterface (https://github.com/couchbase/couchbase-php-client/pull/57[#57])
* https://issues.couchbase.com/browse/PCBC-899[PCBC-899]:
  Ensure the connection will be closed on error (https://github.com/couchbase/couchbase-php-client/pull/70[#70])
* https://issues.couchbase.com/browse/PCBC-900[PCBC-900]:
  Don't set "function" property on exceptions. (https://github.com/couchbase/couchbase-php-client/pull/74[#74])
* https://issues.couchbase.com/browse/PCBC-905[PCBC-905]:
  Don't dereference empty optional if option is not set (https://github.com/couchbase/couchbase-php-client/pull/75[#75])
* https://issues.couchbase.com/browse/PCBC-907[PCBC-907]:
  Assign meta to view query result (https://github.com/couchbase/couchbase-php-client/pull/79[#79])
* Fix missing header for GCC 13 (https://github.com/couchbase/couchbase-php-client/pull/63[#63])

==== Underlying C++ SDK Core

==== Notable Changes in C++ SDK 1.0.0-dp.4

* https://issues.couchbase.com/browse/CXXCBC-275[CXXCBC-275]:
Update implementation query context fields passed to the server. In future versions of the server versions it will become mandatory to specify context of the statement (bucket, scope and collection).
This change ensures that both future and current server releases supported transparently.
* https://issues.couchbase.com/browse/CXXCBC-296[CXXCBC-296]:
Force PLAIN SASL auth if TLS enabled. Using SCRAM SASL mechanisms over TLS protocol is unnecesary complication, that slows down initial connection bootstrap and potentially limits server ability to improve security and evolve credentials management.
* https://issues.couchbase.com/browse/CXXCBC-295[CXXCBC-295]:
The `get with projections` opration should not fail if one of the the paths is missing in the document, because the semantics is "get the partial document" and not "get individual fields" like in `lookup_in` operation.
* https://issues.couchbase.com/browse/CXXCBC-294[CXXCBC-294]:
In the Public API, if `get` operation requested to return expiry time, zero expiry should not be interpreted as absolute expiry timestamp (zero seconds from UNIX epoch), but rather as absense of the expiry.
* https://issues.couchbase.com/browse/CXXCBC-291[CXXCBC-291]:
Allow to disable mutation tokens for Key/Value mutations (use `enable_mutation_tokens` in connection string).
* Resource management and performance improvements:
** Fix tracer and meter ref-counting (https://github.com/couchbaselabs/couchbase-cxx-client/pull/370[#370])
** Replace `minstd_rand` with `mt19937_64`, as it gives less collisions (https://github.com/couchbaselabs/couchbase-cxx-client/pull/356[#356])
** https://issues.couchbase.com/browse/CXXCBC-285[CXXCBC-285]:
Write to sockets from IO threads, to eliminate potential race conditions. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/348[#348])
** Eliminate looping transform in `mcbp_parser::next` (https://github.com/couchbaselabs/couchbase-cxx-client/pull/347[#347])
** https://issues.couchbase.com/browse/CXXCBC-295[CXXCBC-205]:
Use thread-local UUID generator (https://github.com/couchbaselabs/couchbase-cxx-client/pull/340[#340])
** https://issues.couchbase.com/browse/CXXCBC-293[CXXCBC-293]:
Performance improvements:
*** Speed up UUID serialization to string (https://github.com/couchbaselabs/couchbase-cxx-client/pull/346[#346])
*** Don't allow to copy `mcbp_message` objects (https://github.com/couchbaselabs/couchbase-cxx-client/pull/345[#345])
*** Avoid extra allocation and initialization (https://github.com/couchbaselabs/couchbase-cxx-client/pull/344[#344])
* Build system fixes:
** Fix build with gcc-13 (https://github.com/couchbaselabs/couchbase-cxx-client/pull/372[#372])
** Fix gcc 12 issue (https://github.com/couchbaselabs/couchbase-cxx-client/pull/367[#367])
* Enhancements:
** Include bucketless KV service when ping is requested. (https://github.com/couchbaselabs/couchbase-cxx-client/pull/339[#339])
** Include OS name in SDK identifier (https://github.com/couchbaselabs/couchbase-cxx-client/pull/349[#349])


=== Version 4.1.0 (20 January 2023)

Version 4.1.0 brings a number of improvements related to internal connection behavior.

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.1.0

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.1.0.tgz[couchbase-4.0.0.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.1.0.sha256sum[couchbase-4.0.0.sha256sum]
|===



==== New Features

* https://issues.couchbase.com/browse/PCBC-824[PCBC-824]: Implemented replica reads.
* https://issues.couchbase.com/browse/PCBC-630[PCBC-630]: Implemented legacy durability for mutations (replicateTo/persistTo options)
* https://issues.couchbase.com/browse/PCBC-880[PCBC-880]: Support for configuration profiles

==== Fixes

* https://issues.couchbase.com/browse/PCBC-889[PCBC-889]: Fixed behaviour of 'skip' SearchOption.
* Bug fixes: logger and build improvements


==== Caveats

There are no pre-built binaries for the Windows platform of PHP SDK 4.1.0.
But there are steps in https://github.com/couchbase/couchbase-php-client/blob/4.1.0/WINDOWS.md[WINDOWS.md],
that describe how to build an extension along with PHP interpreter.



== PHP SDK 4.0 Releases

PHP SDK 4.0 is written to xref:compatibility.adoc#api-version[version 3.3 of the SDK API specification]
(and matching the features available in Couchbase 7.1 and earlier).


=== Version 4.0.0 (11 May 2022)

Version 4.0.0 is the first major release of the next generation PHP SDK, built on the Couchbase++ library --
featuring multi-document distributed ACID transactions, and bringing a number of improvements related to internal connection behavior.

API documentation: https://docs.couchbase.com/sdk-api/couchbase-php-client-4.0.0

|===
|Source          |https://packages.couchbase.com/clients/php/couchbase-4.0.0.tgz[couchbase-4.0.0.tgz]
|Checksum        |https://packages.couchbase.com/clients/php/couchbase-4.0.0.sha256sum[couchbase-4.0.0.sha256sum]
|===

==== New Features

* https://issues.couchbase.com/browse/PCBC-806[PCBC-806]: Migrated core to Couchbase++.
* https://issues.couchbase.com/browse/PCBC-797[PCBC-797]: Updated the Query Index management API to use scopes and collections.
* https://issues.couchbase.com/browse/PCBC-836[PCBC-836]: Added support for the Transactions API.

==== Caveats

There are no pre-built binaries for the Windows platform of PHP SDK 4.0.0.
But there are steps in https://github.com/couchbase/couchbase-php-client/blob/4.0.0/WINDOWS.md[WINDOWS.md],
that describe how to build an extension along with PHP interpreter.

include::partial$older-releases.adoc[]

// end::all[]
